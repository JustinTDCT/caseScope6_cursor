<!doctype html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="utf-8">
    <title>caseScope v{{ version }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>(function(){var m=localStorage.getItem("casescope-theme")||"dark";document.documentElement.setAttribute("data-theme",m);if(m==="dark"){document.addEventListener("DOMContentLoaded",function(){document.body.classList.add("bg")})}})();</script>
    <link href="/static/css/theme.css" rel="stylesheet">
    <script defer src="/static/js/app.js"></script>
  </head>
  <body class="bg">
    <div class="app-shell">
      <aside class="sidebar">
        <div class="brandrow">
          <div class="brand"><span class="brand-case">case</span><span class="brand-scope">Scope</span></div>
          <span class="version-badge">v{{ version }}</span>
        </div>
        <nav class="nav">
          <a class="nav-item {% if request.url.path.startswith('/cases') %}active{% endif %}" href="/dashboard">Cases</a>
          <a class="nav-item {% if request.url.path.startswith('/upload') %}active{% endif %}" href="/upload">Upload EVTX</a>
          <a class="nav-item {% if request.url.path.startswith('/search') %}active{% endif %}" href="/search">Search</a>
          <a class="nav-item {% if request.url.path.startswith('/settings') %}active{% endif %}" href="/settings">Settings</a>
        </nav>
      </aside>
      <main class="main">
        <header class="topbar">
          <div class="spacer"></div>
          <div class="userbar">
            <button id="themeToggle" class="btn btn-ghost" title="Toggle theme">Theme</button>
            {% if username %}
            <span class="userinfo">{{ username }} ({{ role }})</span>
            <form method="post" action="/logout"><button class="btn btn-secondary">Logout</button></form>
            {% endif %}
          </div>
        </header>
        <section class="content">
          {% block content %}{% endblock %}
        </section>
        <footer class="footer">
          <span>&copy; 2025 Justin Dube</span>
          <a href="mailto:casescope@thedubes.net">casescope@thedubes.net</a>
        </footer>
      </main>
    </div>
  </body>
</html>
